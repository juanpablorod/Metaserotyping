mkdir results; for d in barcode*; do cd $d; cat *.fastq.gz > ${d}.fastq.gz; gunzip ${d}.fastq.gz; diamond blastx -q ${d}.fastq -d ~/databases/PBP1a/PBP1a_diamond.dmnd -o ${d}_PBP1a.tsv --id 97 -F 15 --range-culling --top 0; diamond blastx -q ${d}.fastq -d ~/databases/PBP2b/PBP2b_diamond.dmnd -o ${d}_PBP2b.tsv --id 97 -F 15 --range-culling --top 0; diamond blastx -q ${d}.fastq -d ~/databases/PBP2x/PBP2x_diamond.dmnd -o ${d}_PBP2x.tsv --id 97 -F 15 --range-culling --top 0; mv *.tsv ../results; cd ../; done; cd results/; for d in *.tsv; do awk '{print $2}' $d | sort | uniq -c > ${d%%.tsv}.txt; done; for d in *1a.txt; do ls $d >> PBP1a_diamond_summary.txt; cat $d >> PBP1a_diamond_summary.txt; done; for d in *2b.txt; do ls $d >> PBP2b_diamond_summary.txt; cat $d >> PBP2b_diamond_summary.txt; done; for d in *2x.txt; do ls $d >> PBP2x_diamond_summary.txt; cat $d >> PBP2x_diamond_summary.txt; done

